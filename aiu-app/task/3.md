# –°–æ–∑–¥–∞–Ω–∏–µ Pinterest-–ø–æ–¥–æ–±–Ω–æ–π –≥–∞–ª–µ—Ä–µ–∏ –≤ React Native Expo

## –õ–µ–∫—Ü–∏—è: –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

Pinterest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç masonry layout (–∫–∏—Ä–ø–∏—á–Ω–∞—è –∫–ª–∞–¥–∫–∞), –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–∑–Ω–æ–π –≤—ã—Å–æ—Ç—ã —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

*   **`ImageList`:** –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (masonry layout).
*   **`ImageItem`:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**

*   **React Native:** –î–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
*   **Expo:**  –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.
*   **`react-native-masonry-layout` –∏–ª–∏ `react-native-staggered-grid`:**  –î–ª—è masonry layout.
*   **`react-native-fast-image`:**  –î–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.
*   **`react-native-safe-area-context`:**  –î–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å "—á–µ–ª–∫–∞–º–∏".
*   **`@react-native-async-storage/async-storage`:**  –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–ª–∞–π–∫–∏, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è).

## –ü—Ä–∞–∫—Ç–∏–∫–∞: –®–∞–≥ –∑–∞ —à–∞–≥–æ–º

**–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Expo**

```bash
expo init PinterestGallery
cd PinterestGallery
npm install react-native-masonry-layout react-native-fast-image react-native-safe-area-context @react-native-async-storage/async-storage
# –ò–ª–∏, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å react-native-staggered-grid
# npm install react-native-staggered-grid react-native-fast-image react-native-safe-area-context @react-native-async-storage/async-storage


–®–∞–≥ 2: App.js (–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä)

import React, { useState, useEffect } from 'react';
import { StyleSheet, View, Dimensions, ActivityIndicator, TouchableOpacity, Text, FlatList } from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { Image } from 'react-native';

const numColumns = 2;
const gap = 5;

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
  },
  image: {
    borderRadius: 10,
    backgroundColor: '#eee',
  },
  itemContainer: {
    flex: 1,
    margin: gap / 2,
    aspectRatio: 1,
  },
  likeText: {
    position: 'absolute',
    top: 5,
    right: 5,
    color: 'white',
    backgroundColor: 'rgba(0,0,0,0.5)',
    padding: 5,
    borderRadius: 5,
  },
});

export default function App() {
  const columnWidth = (Dimensions.get('window').width - gap * (numColumns + 1)) / numColumns;

  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);
  const [page, setPage] = useState(1);
  const [likedImages, setLikedImages] = useState({});

  useEffect(() => {
    const loadLikedImages = async () => {
      const storedLikes = await AsyncStorage.getItem('likedImages');
      setLikedImages(storedLikes ? JSON.parse(storedLikes) : {});
    };
    loadLikedImages();
  }, []);

  const fetchImages = async (page) => {
    return Array.from({ length: 10 }, (_, i) => ({
      id: img-${page}-${i},
      uri: https://picsum.photos/300/300?random=${Math.random()},
    }));
  };

  useEffect(() => {
    const loadInitialData = async () => {
      setLoading(true);
      const initialImages = await fetchImages(1);
      setData(initialImages);
      setLoading(false);
    };
    loadInitialData();
  }, []);

  const loadMoreData = async () => {
    const newImages = await fetchImages(page + 1);
    setData((prev) => [...prev, ...newImages]);
    setPage((prev) => prev + 1);
  };

  const toggleLike = async (id) => {
    const updatedLikes = { ...likedImages, [id]: !likedImages[id] };
    setLikedImages(updatedLikes);
    await AsyncStorage.setItem('likedImages', JSON.stringify(updatedLikes));
  };

  const renderItem = ({ item }) => (
    <View style={styles.itemContainer}>
      <TouchableOpacity onPress={() => console.log('Image clicked:', item.id)}>
        <Image
          style={[styles.image, { width: columnWidth, height: columnWidth }]}
          source={{ uri: item.uri }}
          resizeMode="cover"
        />
        <TouchableOpacity onPress={() => toggleLike(item.id)} style={styles.likeText}>
          <Text>{likedImages[item.id] ? '‚ù§Ô∏è' : 'ü§ç'}</Text>
        </TouchableOpacity>
      </TouchableOpacity>
    </View>
  );

  return (
    <View style={styles.container}>
      {loading ? (
        <ActivityIndicator size="large" color="#0000ff" />
      ) : (
        <FlatList
          data={data}
          renderItem={renderItem}
          keyExtractor={(item) => item.id}
          numColumns={numColumns}
          onEndReached={loadMoreData}
          onEndReachedThreshold={0.5}
          contentContainerStyle={{ paddingHorizontal: gap / 2 }}
        />
      )}
    </View>
  );
} 
```

–®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
expo start
```

–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API: –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ fetchImages –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API-–∑–∞–ø—Ä–æ—Å.

–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é onEndReached –∏ loadMoreData.

–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π: –î–æ–±–∞–≤–ª–µ–Ω TouchableOpacity –≤–æ–∫—Ä—É–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

–õ–∞–π–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–∞–π–∫–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AsyncStorage.

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: react-native-fast-image

–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è: MasonryList

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: WebP

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ê–Ω–∏–º–∞—Ü–∏–∏

UI/UX

**–í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

*   **–ü–æ–ª–Ω—ã–π –∫–æ–¥ `App.js`:**  –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏.
*   **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `https://source.unsplash.com/random` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
*   **`useCallback`:**  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ `fetchImages` –∏ `loadMoreData`.
*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –î–æ–±–∞–≤–ª–µ–Ω—ã `try...catch` –±–ª–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.
*   **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:** –ö–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.
*   **–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ `fetchImages`:**  –ò–º–∏—Ç–∏—Ä—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É API –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏.
*   **–£–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**  –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.
*   **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã:**  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `item.height` –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∏–ª–∏ –≤—ã—á–∏—Å–ª—è–π—Ç–µ –µ–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π).
